
trigger accountOpportunityUpdate on Account (before update) {
    
    If(Trigger.isbefore && Trigger.isUpdate){
    
    for(Account account : Trigger.new){
        Decimal OpportunityAmount = 0;
        
        for(Opportunity opportunity : [SELECT Name,Amount FROM Opportunity  WHERE AccountId = :account.Id])        
        
        // here (Opportunity opportunity : account.Opportunities) not         
        //      working.
                                                             
        {             
            OpportunityAmount = OpportunityAmount+opportunity.Amount;
    
        }
      
        account.Total_Amount__c = OpportunityAmount;      
    }                 
    
    }
}                                        
